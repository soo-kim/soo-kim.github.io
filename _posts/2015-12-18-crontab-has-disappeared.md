---
layout: post
title: Crontab의 내용은 사라질 수 있다
---

물론, 당연히! 내가 부주의한 탓이겠지만, 가끔 cron에 있던 내용이 모두 사라지는 경우가 있다. cron 설정도 스크립팅 해두면 간혹 발생할 수 있는 사고를 미연에 방지할 수 있다.

crontab 명령어 자체는 표준입력(Standard input)으로부터 내용을 입력받도록 만들어져 있는데, 처음 작성할 때라면 몰라도, 수정이 필요할 때마다 매번 표준입력을 이용하는 사람은 아마도 없을 것이다.

보통은 별도의 텍스트 파일에 만들어 파이프(|)를 이용하거나, `crontab -e`와 같이 편집 옵션을 줘서 vim 등의 에디터로 수정한다. (에디터는 쉘의 환경변수 VISUAL로 변경할 수 있다. 예: `export VISUAL=vim`)



## 귀찮더라도 스크립트를 만들어두는 것이 좋다

cron은 개발서버 외의 환경에서는 한 번 셋팅하면 거의 수정할 일이 없기 때문에, 굳이 이를 위한 스크립트는 따로 만들지 않았다. 하지만, 조금 귀찮더라도 예방 차원에서 스크립트를 만들어두는 편이 좋다. 우리는 사람이기 때문이다. 나 역시도 실수로 cron을 날려먹는 사고를 친 일이 있다. 

물론 이 정도의 사고는 금방 복구할 수 있다. 백업에서 가지고 오거나, /var/log를 뒤적여서 새로 작성할 수도 있기 때문이다. 하지만, 아무리 쉽게 복구할 수 있다고 해도, 애초에 사고가 생기지 않도록 하는 편이 당연히 효율적이다.


